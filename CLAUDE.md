# Правила проекта

## Язык
- Общение: **русский**
- Комментарии в коде: русский
- Переменные и функции: английский

## TypeScript
- `catch (error: unknown)` — **НИКОГДА** `any`
- Неиспользуемые параметры: префикс `_` (напр. `_request`)
- Строгий `tsconfig.json` с `strict: true`
- Каждый компонент/модуль имеет типизированные props/interfaces

## Next.js
- Шрифты: **только** через `next/font`, никогда через `<link>` в `<head>`
- Изображения: **только** через `next/image`
- Server Components по умолчанию, `'use client'` только когда необходимо
- Route Handlers: `export async function POST(_request: Request)` если request не используется

## Качество кода
- Перед коммитом: `npm run lint && npm run type-check` (автоматически через Husky)
- Перед деплоем: `npm run pre-deploy` (lint + types + build + test)
- Функции < 20 строк, один уровень ответственности
- Никаких `console.log` в production коде (только `console.error`)

## Git
- Conventional commits: `fix:`, `feat:`, `chore:`, `docs:`
- Ветки: `main` (прод), `dev` (разработка), `feat/xxx` (фичи)

## Деплой
- Vercel подключается к проекту-копии (не к шаблону)
- Все env через `.env.template` + Vercel Dashboard
- CI через GitHub Actions (lint → types → build → test)

## Стартовый Протокол
- В начале работы над проектом запустите: `npm run go` (Go to Stars Protocol)
- Это проверит окружение, ключи и зависимости.

## API и Внешние сервисы
- **Проверка ключей**: ПРОВЕРЯТЬ **ТОЛЬКО** тот API сервис, ключ которого был добавлен или изменен в файле `.env.local` в текущий момент. Не проверять все остальные (старые) ключи каждый раз!
- **Лимиты и квоты**: Обязательно проверять наличие квот, rate limits и других ограничений в подключенных внешних сервисах. Код должен быть адаптирован под эти ограничения (например, реализация retry-логики, backoff, обработка HTTP 429).

## Безопасность и Временные файлы (CRITICAL)
- **НИКАКИХ ХАРДКОД-КЛЮЧЕЙ**: Абсолютно запрещено вставлять API-ключи, токены и пароли открытым текстом в ЛЮБЫЕ файлы (включая временные скрипты для тестов). Если не читается `.env.local`, нужно решить проблему с чтением файла, а не хардкодить ключ.
- **Временные скрипты**: Любые тестовые/проверочные скрипты (например, для проверки API) должны создаваться **ТОЛЬКО** в системной директории `/tmp/`, а не в папке проекта.
- **Очистка и Git**: Категорически запрещено коммитить временные скрипты (типа `test-gemini.js`). Всегда удаляйте за собой временные файлы и проверяйте `git status` / `git diff` перед созданием коммита, чтобы исключить утечку ключей или мусора.
